{# Load the tag library #}
{% load bootstrap3 %}

{# Load CSS and JavaScript #}
{% bootstrap_css %}
{% bootstrap_javascript %}

{# Display django.contrib.messages as Bootstrap alerts #}
{% bootstrap_messages %}

<form method="post" action="">
    <h1>
        <h1 style="color:blue;" align="center" >WELCOME TO LOTTERY</h1>
    </h1>

    <h1>
        <h1 style="color:red;" align="center" ><font size="4">Quick! Lottery is going to end in {{lotterydeadline}}</font></h1>
    </h1>

    <div id="clockdiv"></div>
    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script>

        $( document ).ready(function() {
            initializeClock(clockdiv, {{lotterydeadline}});
        });

        function getTimeRemaining(endtime){
          var t = Date.parse(endtime) - Date.parse(new Date());
          var seconds = Math.floor( (t/1000) % 60 );
          var minutes = Math.floor( (t/1000/60) % 60 );
          var hours = Math.floor( (t/(1000*60*60)) % 24 );
          var days = Math.floor( t/(1000*60*60*24) );
          return {
            'total': t,
            'days': days,
            'hours': hours,
            'minutes': minutes,
            'seconds': seconds
          };
        }

        function initializeClock(id, endtime){
          var clock = document.getElementById(id);
          var timeinterval = setInterval(function(){
            var t = getTimeRemaining(endtime);
            clock.innerHTML = 'days: ' + t.days + '<br>' +
                              'hours: '+ t.hours + '<br>' +
                              'minutes: ' + t.minutes + '<br>' +
                              'seconds: ' + t.seconds;
            if(t.total<=0){
              clearInterval(timeinterval);
            }
          },1000);
        }

        function myFunction() {
            myVar = setInterval(alertFunc, 3000);
        }

        function alertFunc() {
          alert("Hello!");
        }
    </script>

    <h1 style="padding:100px">
        {% bootstrap_formset formset layout='vertical' width='100' %}
    </h1>

    <h1 align="center">
        {% bootstrap_button "Submit" button_type="submit" button_class="btn-primary" %}
        {% csrf_token %}
    </h1>
</form>

